(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[931],{6888:function(e,t,s){Promise.resolve().then(s.bind(s,6719))},6719:function(e,t,s){"use strict";s.r(t),s.d(t,{default:function(){return ef}});var a=s(7437),n=s(2265),r=s(386),i=s(1455);let l={boothPeople:[],transactions:[],uploadedFile:null},o=(0,i.oM)({name:"app",initialState:l,reducers:{addBoothPerson:(e,t)=>{let s={...t.payload,id:Date.now().toString(),createdAt:new Date().toISOString()};e.boothPeople.push(s),c(e)},updateBoothPerson:(e,t)=>{let s=e.boothPeople.findIndex(e=>e.id===t.payload.id);-1!==s&&(e.boothPeople[s]=t.payload,c(e))},deleteBoothPerson:(e,t)=>{e.boothPeople=e.boothPeople.filter(e=>e.id!==t.payload),c(e)},addVPAToPerson:(e,t)=>{let s=e.boothPeople.find(e=>e.id===t.payload.personId);s&&(s.customerVPAs.forEach(e=>{e.isDefault=!1,e.isDisabled=!0}),s.customerVPAs.push({id:Date.now().toString(),vpa:t.payload.vpa,isDefault:!0,isDisabled:!1,createdAt:new Date().toISOString()}),c(e))},setTransactions:(e,t)=>{e.transactions=t.payload,c(e)},setUploadedFile:(e,t)=>{e.uploadedFile=t.payload,c(e)},matchTransaction:(e,t)=>{let s=e.transactions[t.payload.transactionIndex];s&&(s.isMatched=!0,s.matchedPersonId=t.payload.personId,c(e))},loadStateFromStorage:e=>d()}}),d=()=>{try{let e=localStorage.getItem("booth-payment-app-state");if(e)return JSON.parse(e)}catch(e){console.error("Error loading state from localStorage:",e)}return l},c=e=>{try{localStorage.setItem("booth-payment-app-state",JSON.stringify(e))}catch(e){console.error("Error saving state to localStorage:",e)}},{addBoothPerson:h,updateBoothPerson:u,deleteBoothPerson:m,addVPAToPerson:x,setTransactions:p,setUploadedFile:g,matchTransaction:f,loadStateFromStorage:j}=o.actions,v=(0,i.xC)({reducer:{app:o.reducer}});var b=s(7053),N=s(535),w=s(4508);let y=(0,N.j)("inline-flex items-center justify-center gap-2 whitespace-nowrap rounded-md text-sm font-medium transition-all disabled:pointer-events-none disabled:opacity-50 [&_svg]:pointer-events-none [&_svg:not([class*='size-'])]:size-4 shrink-0 [&_svg]:shrink-0 outline-none focus-visible:border-ring focus-visible:ring-ring/50 focus-visible:ring-[3px] aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive",{variants:{variant:{default:"bg-primary text-primary-foreground shadow-xs hover:bg-primary/90",destructive:"bg-destructive text-white shadow-xs hover:bg-destructive/90 focus-visible:ring-destructive/20 dark:focus-visible:ring-destructive/40 dark:bg-destructive/60",outline:"border bg-background shadow-xs hover:bg-accent hover:text-accent-foreground dark:bg-input/30 dark:border-input dark:hover:bg-input/50",secondary:"bg-secondary text-secondary-foreground shadow-xs hover:bg-secondary/80",ghost:"hover:bg-accent hover:text-accent-foreground dark:hover:bg-accent/50",link:"text-primary underline-offset-4 hover:underline"},size:{default:"h-9 px-4 py-2 has-[>svg]:px-3",sm:"h-8 rounded-md gap-1.5 px-3 has-[>svg]:px-2.5",lg:"h-10 rounded-md px-6 has-[>svg]:px-4",icon:"size-9"}},defaultVariants:{variant:"default",size:"default"}});function P(e){let{className:t,variant:s,size:n,asChild:r=!1,...i}=e,l=r?b.g7:"button";return(0,a.jsx)(l,{"data-slot":"button",className:(0,w.cn)(y({variant:s,size:n,className:t})),...i})}var A=s(5466),S=s(5805);function C(e){let{currentPage:t,onPageChange:s}=e;return(0,a.jsx)("nav",{className:"border-b bg-background",children:(0,a.jsx)("div",{className:"container mx-auto px-4",children:(0,a.jsxs)("div",{className:"flex items-center justify-between h-16",children:[(0,a.jsx)("div",{className:"flex items-center space-x-4",children:(0,a.jsx)("h1",{className:"text-xl font-bold",children:"Milk Factory Payment"})}),(0,a.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,a.jsxs)(P,{variant:"dashboard"===t?"default":"ghost",onClick:()=>s("dashboard"),className:"flex items-center gap-2",children:[(0,a.jsx)(A.Z,{className:"h-4 w-4"}),"Dashboard"]}),(0,a.jsxs)(P,{variant:"booth-people"===t?"default":"ghost",onClick:()=>s("booth-people"),className:"flex items-center gap-2",children:[(0,a.jsx)(S.Z,{className:"h-4 w-4"}),"Booth People"]})]})]})})})}function V(e){let{className:t,...s}=e;return(0,a.jsx)("div",{"data-slot":"card",className:(0,w.cn)("bg-card text-card-foreground flex flex-col gap-6 rounded-xl border py-6 shadow-sm",t),...s})}function k(e){let{className:t,...s}=e;return(0,a.jsx)("div",{"data-slot":"card-header",className:(0,w.cn)("@container/card-header grid auto-rows-min grid-rows-[auto_auto] items-start gap-1.5 px-6 has-data-[slot=card-action]:grid-cols-[1fr_auto] [.border-b]:pb-6",t),...s})}function D(e){let{className:t,...s}=e;return(0,a.jsx)("div",{"data-slot":"card-title",className:(0,w.cn)("leading-none font-semibold",t),...s})}function T(e){let{className:t,...s}=e;return(0,a.jsx)("div",{"data-slot":"card-description",className:(0,w.cn)("text-muted-foreground text-sm",t),...s})}function I(e){let{className:t,...s}=e;return(0,a.jsx)("div",{"data-slot":"card-content",className:(0,w.cn)("px-6",t),...s})}function E(e){let{className:t,type:s,...n}=e;return(0,a.jsx)("input",{type:s,"data-slot":"input",className:(0,w.cn)("file:text-foreground placeholder:text-muted-foreground selection:bg-primary selection:text-primary-foreground dark:bg-input/30 border-input flex h-9 w-full min-w-0 rounded-md border bg-transparent px-3 py-1 text-base shadow-xs transition-[color,box-shadow] outline-none file:inline-flex file:h-7 file:border-0 file:bg-transparent file:text-sm file:font-medium disabled:pointer-events-none disabled:cursor-not-allowed disabled:opacity-50 md:text-sm","focus-visible:border-ring focus-visible:ring-ring/50 focus-visible:ring-[3px]","aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive",t),...n})}function U(e){let{className:t,...s}=e;return(0,a.jsx)("div",{"data-slot":"table-container",className:"relative w-full overflow-x-auto",children:(0,a.jsx)("table",{"data-slot":"table",className:(0,w.cn)("w-full caption-bottom text-sm",t),...s})})}function O(e){let{className:t,...s}=e;return(0,a.jsx)("thead",{"data-slot":"table-header",className:(0,w.cn)("[&_tr]:border-b",t),...s})}function M(e){let{className:t,...s}=e;return(0,a.jsx)("tbody",{"data-slot":"table-body",className:(0,w.cn)("[&_tr:last-child]:border-0",t),...s})}function _(e){let{className:t,...s}=e;return(0,a.jsx)("tr",{"data-slot":"table-row",className:(0,w.cn)("hover:bg-muted/50 data-[state=selected]:bg-muted border-b transition-colors",t),...s})}function F(e){let{className:t,...s}=e;return(0,a.jsx)("th",{"data-slot":"table-head",className:(0,w.cn)("text-foreground h-10 px-2 text-left align-middle font-medium whitespace-nowrap [&:has([role=checkbox])]:pr-0 [&>[role=checkbox]]:translate-y-[2px]",t),...s})}function R(e){let{className:t,...s}=e;return(0,a.jsx)("td",{"data-slot":"table-cell",className:(0,w.cn)("p-2 align-middle whitespace-nowrap [&:has([role=checkbox])]:pr-0 [&>[role=checkbox]]:translate-y-[2px]",t),...s})}let z=(0,N.j)("inline-flex items-center justify-center rounded-md border px-2 py-0.5 text-xs font-medium w-fit whitespace-nowrap shrink-0 [&>svg]:size-3 gap-1 [&>svg]:pointer-events-none focus-visible:border-ring focus-visible:ring-ring/50 focus-visible:ring-[3px] aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive transition-[color,box-shadow] overflow-hidden",{variants:{variant:{default:"border-transparent bg-primary text-primary-foreground [a&]:hover:bg-primary/90",secondary:"border-transparent bg-secondary text-secondary-foreground [a&]:hover:bg-secondary/90",destructive:"border-transparent bg-destructive text-white [a&]:hover:bg-destructive/90 focus-visible:ring-destructive/20 dark:focus-visible:ring-destructive/40 dark:bg-destructive/60",outline:"text-foreground [a&]:hover:bg-accent [a&]:hover:text-accent-foreground"}},defaultVariants:{variant:"default"}});function B(e){let{className:t,variant:s,asChild:n=!1,...r}=e,i=n?b.g7:"span";return(0,a.jsx)(i,{"data-slot":"badge",className:(0,w.cn)(z({variant:s}),t),...r})}var L=s(8226),Z=s(1671),J=s(8736),q=s(7689),W=s(2735);let G=()=>(0,r.I0)(),X=r.v9;var Y=s(5153);function H(){let e=G(),{boothPeople:t,transactions:s,uploadedFile:r}=X(e=>e.app),[i,l]=(0,n.useState)(null),{toast:o}=(0,Y.pm)(),d=s.filter(e=>e.isMatched),c=s.filter(e=>!e.isMatched),h=s.reduce((e,t)=>e+t.transactionAmount,0);return(0,a.jsxs)("div",{className:"space-y-6",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("h2",{className:"text-2xl font-bold",children:"Dashboard"}),(0,a.jsx)("p",{className:"text-muted-foreground",children:"Upload and match transaction data"})]}),(0,a.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4",children:[(0,a.jsx)(V,{children:(0,a.jsx)(I,{className:"p-6",children:(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("p",{className:"text-sm font-medium text-muted-foreground",children:"Total People"}),(0,a.jsx)("p",{className:"text-2xl font-bold",children:t.length})]}),(0,a.jsx)(S.Z,{className:"h-8 w-8 text-blue-600"})]})})}),(0,a.jsx)(V,{children:(0,a.jsx)(I,{className:"p-6",children:(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("p",{className:"text-sm font-medium text-muted-foreground",children:"Transactions"}),(0,a.jsx)("p",{className:"text-2xl font-bold",children:s.length})]}),(0,a.jsx)(L.Z,{className:"h-8 w-8 text-green-600"})]})})}),(0,a.jsx)(V,{children:(0,a.jsx)(I,{className:"p-6",children:(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("p",{className:"text-sm font-medium text-muted-foreground",children:"Matched"}),(0,a.jsx)("p",{className:"text-2xl font-bold",children:d.length})]}),(0,a.jsx)(Z.Z,{className:"h-8 w-8 text-green-600"})]})})}),(0,a.jsx)(V,{children:(0,a.jsx)(I,{className:"p-6",children:(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("p",{className:"text-sm font-medium text-muted-foreground",children:"Total Amount"}),(0,a.jsxs)("p",{className:"text-2xl font-bold",children:["₹",h.toLocaleString()]})]}),(0,a.jsx)(J.Z,{className:"h-8 w-8 text-purple-600"})]})})})]}),(0,a.jsxs)(V,{children:[(0,a.jsxs)(k,{children:[(0,a.jsx)(D,{children:"Upload Transaction File"}),(0,a.jsx)(T,{children:"Upload CSV file with transaction data"})]}),(0,a.jsxs)(I,{className:"space-y-4",children:[(0,a.jsxs)("div",{className:"flex items-center gap-4",children:[(0,a.jsx)(E,{type:"file",accept:".csv,.txt",onChange:e=>{var t;let s=null===(t=e.target.files)||void 0===t?void 0:t[0];s&&l(s)},className:"flex-1"}),(0,a.jsxs)(P,{onClick:()=>{if(!i){o({title:"Error",description:"Please select a file first",variant:"destructive"});return}let t=new FileReader;t.onload=t=>{var s;let a=(null===(s=t.target)||void 0===s?void 0:s.result).split("\n").filter(e=>e.trim());a[0].split(",");let n=a.slice(1).map((e,t)=>{let s=e.split(",");return{sno:s[0]||(t+1).toString(),transactionDate:s[1]||"",transactionAmount:Number.parseFloat(s[2])||0,rrn:s[3]||"",customerVPA:s[4]||"",isMatched:!1}});e(p(n)),e(g(i.name)),o({title:"Success",description:"Uploaded ".concat(n.length," transactions")})},t.readAsText(i)},disabled:!i,children:[(0,a.jsx)(q.Z,{className:"h-4 w-4 mr-2"}),"Submit"]})]}),(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[(0,a.jsx)("div",{children:r&&(0,a.jsxs)("p",{className:"text-sm text-muted-foreground",children:["Last uploaded: ",r]})}),(0,a.jsxs)(P,{variant:"outline",onClick:()=>{let e=new Blob([[["S.NO","TRANSACTION_DATE","TRANSACTION_AMOUNT","RRN","CUSTOMER VPA (UPI)"],["1","20-09-2025","12850","562998387734","9866496670@yestp"],["2","20-09-2025","15000","562998387735","9876543210@paytm"],["3","20-09-2025","8500","562998387736","9988776655@gpay"],["4","20-09-2025","22000","562998387737","9123456789@phonepe"],["5","20-09-2025","11200","562998387738","9555666777@yestp"]].map(e=>e.join(",")).join("\n")],{type:"text/csv"}),t=URL.createObjectURL(e),s=document.createElement("a");s.href=t,s.download="sample_transaction_data.csv",document.body.appendChild(s),s.click(),document.body.removeChild(s),URL.revokeObjectURL(t),o({title:"Sample Downloaded",description:"Sample CSV file downloaded successfully"})},children:[(0,a.jsx)(W.Z,{className:"h-4 w-4 mr-2"}),"Download Sample CSV"]})]})]})]}),s.length>0&&(0,a.jsxs)(V,{children:[(0,a.jsx)(k,{children:(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)(D,{children:"Transaction Preview"}),(0,a.jsx)(T,{children:"Preview of uploaded transaction data"})]}),(0,a.jsx)(P,{onClick:()=>{console.log("[v0] Starting matching process..."),console.log("[v0] Available booth people:",t.map(e=>({id:e.id,name:e.name,vpas:e.customerVPAs.filter(e=>!e.isDisabled).map(e=>e.vpa)}))),console.log("[v0] All transactions to process:",s.map(e=>({vpa:e.customerVPA,amount:e.transactionAmount,currentlyMatched:e.isMatched})));let a=s.map(e=>{let s=e.customerVPA.trim().toLowerCase(),a=t.find(e=>e.customerVPAs.some(e=>{let t=e.vpa.trim().toLowerCase(),a=t===s&&!e.isDisabled;return console.log("[v0] Comparing VPAs:",{transactionVPA:s,personVPA:t,isDisabled:e.isDisabled,isMatch:a}),a}));return a?(console.log("[v0] Found match:",{transactionVPA:e.customerVPA,matchedPerson:a.name,personId:a.id}),{...e,isMatched:!0,matchedPersonId:a.id}):(console.log("[v0] No match found for VPA:",e.customerVPA),{...e,isMatched:!1,matchedPersonId:void 0})});e(p(a));let n=a.filter(e=>e.isMatched).length;console.log("[v0] Matching complete. Total matched:",n,"Previously matched:",s.filter(e=>e.isMatched).length,"Total transactions:",a.length),o({title:"Matching Complete",description:"".concat(n," transactions matched out of ").concat(a.length," total")})},children:"Match Transactions"})]})}),(0,a.jsxs)(I,{children:[(0,a.jsxs)(U,{children:[(0,a.jsx)(O,{children:(0,a.jsxs)(_,{children:[(0,a.jsx)(F,{children:"S.NO"}),(0,a.jsx)(F,{children:"Date"}),(0,a.jsx)(F,{children:"Amount"}),(0,a.jsx)(F,{children:"RRN"}),(0,a.jsx)(F,{children:"Customer VPA"}),(0,a.jsx)(F,{children:"Match Status"})]})}),(0,a.jsx)(M,{children:s.slice(0,10).map((e,t)=>(0,a.jsxs)(_,{children:[(0,a.jsx)(R,{children:e.sno}),(0,a.jsx)(R,{children:e.transactionDate}),(0,a.jsxs)(R,{children:["₹",e.transactionAmount.toLocaleString()]}),(0,a.jsx)(R,{children:e.rrn}),(0,a.jsx)(R,{className:"font-mono",children:e.customerVPA}),(0,a.jsx)(R,{children:(0,a.jsx)(B,{variant:e.isMatched?"default":"secondary",children:e.isMatched?"Matched":"Unmatched"})})]},t))})]}),s.length>10&&(0,a.jsxs)("p",{className:"text-sm text-muted-foreground mt-4",children:["Showing first 10 of ",s.length," transactions"]})]})]}),c.length>0&&(0,a.jsxs)(V,{children:[(0,a.jsxs)(k,{children:[(0,a.jsx)(D,{children:"Unmatched Transactions"}),(0,a.jsxs)(T,{children:[c.length," transactions could not be matched"]})]}),(0,a.jsx)(I,{children:(0,a.jsxs)(U,{children:[(0,a.jsx)(O,{children:(0,a.jsxs)(_,{children:[(0,a.jsx)(F,{children:"Date"}),(0,a.jsx)(F,{children:"Amount"}),(0,a.jsx)(F,{children:"Customer VPA"}),(0,a.jsx)(F,{children:"RRN"})]})}),(0,a.jsx)(M,{children:c.slice(0,5).map((e,t)=>(0,a.jsxs)(_,{children:[(0,a.jsx)(R,{children:e.transactionDate}),(0,a.jsxs)(R,{children:["₹",e.transactionAmount.toLocaleString()]}),(0,a.jsx)(R,{className:"font-mono",children:e.customerVPA}),(0,a.jsx)(R,{children:e.rrn})]},t))})]})})]})]})}var K=s(6394);function Q(e){let{className:t,...s}=e;return(0,a.jsx)(K.f,{"data-slot":"label",className:(0,w.cn)("flex items-center gap-2 text-sm leading-none font-medium select-none group-data-[disabled=true]:pointer-events-none group-data-[disabled=true]:opacity-50 peer-disabled:cursor-not-allowed peer-disabled:opacity-50",t),...s})}function $(e){let{className:t,...s}=e;return(0,a.jsx)("textarea",{"data-slot":"textarea",className:(0,w.cn)("border-input placeholder:text-muted-foreground focus-visible:border-ring focus-visible:ring-ring/50 aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive dark:bg-input/30 flex field-sizing-content min-h-16 w-full rounded-md border bg-transparent px-3 py-2 text-base shadow-xs transition-[color,box-shadow] outline-none focus-visible:ring-[3px] disabled:cursor-not-allowed disabled:opacity-50 md:text-sm",t),...s})}var ee=s(4182),et=s(2489);function es(e){let{...t}=e;return(0,a.jsx)(ee.fC,{"data-slot":"dialog",...t})}function ea(e){let{...t}=e;return(0,a.jsx)(ee.xz,{"data-slot":"dialog-trigger",...t})}function en(e){let{...t}=e;return(0,a.jsx)(ee.h_,{"data-slot":"dialog-portal",...t})}function er(e){let{className:t,...s}=e;return(0,a.jsx)(ee.aV,{"data-slot":"dialog-overlay",className:(0,w.cn)("data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 fixed inset-0 z-50 bg-black/50",t),...s})}function ei(e){let{className:t,children:s,showCloseButton:n=!0,...r}=e;return(0,a.jsxs)(en,{"data-slot":"dialog-portal",children:[(0,a.jsx)(er,{}),(0,a.jsxs)(ee.VY,{"data-slot":"dialog-content",className:(0,w.cn)("bg-background data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 fixed top-[50%] left-[50%] z-50 grid w-full max-w-[calc(100%-2rem)] translate-x-[-50%] translate-y-[-50%] gap-4 rounded-lg border p-6 shadow-lg duration-200 sm:max-w-lg",t),...r,children:[s,n&&(0,a.jsxs)(ee.x8,{"data-slot":"dialog-close",className:"ring-offset-background focus:ring-ring data-[state=open]:bg-accent data-[state=open]:text-muted-foreground absolute top-4 right-4 rounded-xs opacity-70 transition-opacity hover:opacity-100 focus:ring-2 focus:ring-offset-2 focus:outline-hidden disabled:pointer-events-none [&_svg]:pointer-events-none [&_svg]:shrink-0 [&_svg:not([class*='size-'])]:size-4",children:[(0,a.jsx)(et.Z,{}),(0,a.jsx)("span",{className:"sr-only",children:"Close"})]})]})]})}function el(e){let{className:t,...s}=e;return(0,a.jsx)("div",{"data-slot":"dialog-header",className:(0,w.cn)("flex flex-col gap-2 text-center sm:text-left",t),...s})}function eo(e){let{className:t,...s}=e;return(0,a.jsx)("div",{"data-slot":"dialog-footer",className:(0,w.cn)("flex flex-col-reverse gap-2 sm:flex-row sm:justify-end",t),...s})}function ed(e){let{className:t,...s}=e;return(0,a.jsx)(ee.Dx,{"data-slot":"dialog-title",className:(0,w.cn)("text-lg leading-none font-semibold",t),...s})}function ec(e){let{className:t,...s}=e;return(0,a.jsx)(ee.dk,{"data-slot":"dialog-description",className:(0,w.cn)("text-muted-foreground text-sm",t),...s})}var eh=s(9397),eu=s(5868),em=s(7806),ex=s(8930);function ep(){let e=G(),{boothPeople:t}=X(e=>e.app),[s,r]=(0,n.useState)(!1),[i,l]=(0,n.useState)(!1),[o,d]=(0,n.useState)(null),[c,p]=(0,n.useState)(!1),[g,f]=(0,n.useState)(null),[j,v]=(0,n.useState)(null),[b,N]=(0,n.useState)(""),[w,y]=(0,n.useState)({name:"",phone:"",address:"",customerVPA:""}),{toast:A}=(0,Y.pm)(),S=async()=>{if(!o){A({title:"Error",description:"Please select a file to upload",variant:"destructive"});return}p(!0);try{let t=(await o.text()).split("\n").filter(e=>e.trim());if(t.length<2)throw Error("File must contain at least a header row and one data row");let s=t[0].split(",").map(e=>e.trim());if(!["Name","Phone","Address","Customer VPA (UPI)"].every(e=>s.some(t=>t.toLowerCase().includes(e.toLowerCase()))))throw Error("Invalid file format. Please use the sample CSV format.");let a=0,n=0;for(let s=1;s<t.length;s++){let r=t[s].split(",").map(e=>e.trim());if(r.length>=4&&r[0]&&r[1]&&r[3]){let t={name:r[0],phone:r[1],address:r[2]||"",customerVPAs:[{id:Date.now().toString()+s,vpa:r[3],isDefault:!0,isDisabled:!1,createdAt:new Date().toISOString()}]};e(h(t)),a++}else n++}A({title:"Bulk Upload Complete",description:"Successfully added ".concat(a," people. ").concat(n>0?"".concat(n," rows had errors."):"")}),l(!1),d(null)}catch(e){A({title:"Upload Error",description:e instanceof Error?e.message:"Failed to process file",variant:"destructive"})}finally{p(!1)}},C=e=>{var t;f(e),y({name:e.name,phone:e.phone,address:e.address,customerVPA:(null===(t=e.customerVPAs.find(e=>e.isDefault))||void 0===t?void 0:t.vpa)||""})},z=t=>{e(m(t)),A({title:"Success",description:"Booth person deleted successfully"})};return(0,a.jsxs)("div",{className:"space-y-6",children:[(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("h2",{className:"text-2xl font-bold",children:"Booth People"}),(0,a.jsx)("p",{className:"text-muted-foreground",children:"Manage booth people and their VPA details"})]}),(0,a.jsxs)("div",{className:"flex gap-2",children:[(0,a.jsxs)(es,{open:i,onOpenChange:l,children:[(0,a.jsx)(ea,{asChild:!0,children:(0,a.jsxs)(P,{variant:"outline",children:[(0,a.jsx)(q.Z,{className:"h-4 w-4 mr-2"}),"Bulk Upload"]})}),(0,a.jsxs)(ei,{children:[(0,a.jsxs)(el,{children:[(0,a.jsx)(ed,{children:"Bulk Upload Booth People"}),(0,a.jsx)(ec,{children:"Upload a CSV file to add multiple booth people at once"})]}),(0,a.jsxs)("div",{className:"grid gap-4 py-4",children:[(0,a.jsxs)("div",{className:"grid gap-2",children:[(0,a.jsx)(Q,{htmlFor:"bulk-file",children:"CSV File"}),(0,a.jsx)(E,{id:"bulk-file",type:"file",accept:".csv,.txt",onChange:e=>{var t;return d((null===(t=e.target.files)||void 0===t?void 0:t[0])||null)}}),(0,a.jsx)("p",{className:"text-sm text-muted-foreground",children:"Upload a CSV file with columns: Name, Phone, Address, Customer VPA (UPI)"})]}),(0,a.jsx)("div",{className:"flex items-center gap-2",children:(0,a.jsxs)(P,{variant:"outline",size:"sm",onClick:()=>{let e=new Blob(["Name,Phone,Address,Customer VPA (UPI)\nJohn Doe,9876543210,123 Main Street,9876543210@yestp\nJane Smith,9876543211,456 Oak Avenue,9876543211@paytm\nMike Johnson,9876543212,789 Pine Road,9876543212@gpay\nSarah Wilson,9876543213,321 Elm Street,9876543213@phonepe"],{type:"text/csv"}),t=window.URL.createObjectURL(e),s=document.createElement("a");s.href=t,s.download="booth_people_sample.csv",document.body.appendChild(s),s.click(),document.body.removeChild(s),window.URL.revokeObjectURL(t)},children:[(0,a.jsx)(W.Z,{className:"h-4 w-4 mr-2"}),"Download Sample CSV"]})})]}),(0,a.jsxs)(eo,{children:[(0,a.jsx)(P,{variant:"outline",onClick:()=>l(!1),children:"Cancel"}),(0,a.jsx)(P,{onClick:S,disabled:!o||c,children:c?"Uploading...":"Upload"})]})]})]}),(0,a.jsxs)(es,{open:s,onOpenChange:r,children:[(0,a.jsx)(ea,{asChild:!0,children:(0,a.jsxs)(P,{children:[(0,a.jsx)(eh.Z,{className:"h-4 w-4 mr-2"}),"Add Person"]})}),(0,a.jsxs)(ei,{children:[(0,a.jsxs)(el,{children:[(0,a.jsx)(ed,{children:"Add New Booth Person"}),(0,a.jsx)(ec,{children:"Add a new person with their VPA details"})]}),(0,a.jsxs)("div",{className:"grid gap-4 py-4",children:[(0,a.jsxs)("div",{className:"grid gap-2",children:[(0,a.jsx)(Q,{htmlFor:"name",children:"Name *"}),(0,a.jsx)(E,{id:"name",value:w.name,onChange:e=>y({...w,name:e.target.value}),placeholder:"Enter full name"})]}),(0,a.jsxs)("div",{className:"grid gap-2",children:[(0,a.jsx)(Q,{htmlFor:"phone",children:"Phone *"}),(0,a.jsx)(E,{id:"phone",value:w.phone,onChange:e=>y({...w,phone:e.target.value}),placeholder:"Enter phone number"})]}),(0,a.jsxs)("div",{className:"grid gap-2",children:[(0,a.jsx)(Q,{htmlFor:"address",children:"Address"}),(0,a.jsx)($,{id:"address",value:w.address,onChange:e=>y({...w,address:e.target.value}),placeholder:"Enter address"})]}),(0,a.jsxs)("div",{className:"grid gap-2",children:[(0,a.jsx)(Q,{htmlFor:"customerVPA",children:"Customer VPA (UPI) *"}),(0,a.jsx)(E,{id:"customerVPA",value:w.customerVPA,onChange:e=>y({...w,customerVPA:e.target.value}),placeholder:"Enter UPI ID (e.g., 9876543210@yestp)"})]})]}),(0,a.jsxs)(eo,{children:[(0,a.jsx)(P,{variant:"outline",onClick:()=>r(!1),children:"Cancel"}),(0,a.jsx)(P,{onClick:()=>{if(!w.name||!w.phone||!w.customerVPA){A({title:"Error",description:"Please fill in all required fields",variant:"destructive"});return}e(h({name:w.name,phone:w.phone,address:w.address,customerVPAs:[{id:Date.now().toString(),vpa:w.customerVPA,isDefault:!0,isDisabled:!1,createdAt:new Date().toISOString()}]})),y({name:"",phone:"",address:"",customerVPA:""}),r(!1),A({title:"Success",description:"Booth person added successfully"})},children:"Add Person"})]})]})]})]})]}),(0,a.jsxs)(V,{children:[(0,a.jsxs)(k,{children:[(0,a.jsx)(D,{children:"All Booth People"}),(0,a.jsx)(T,{children:"Manage all registered booth people and their VPA details"})]}),(0,a.jsx)(I,{children:(0,a.jsxs)(U,{children:[(0,a.jsx)(O,{children:(0,a.jsxs)(_,{children:[(0,a.jsx)(F,{children:"Name"}),(0,a.jsx)(F,{children:"Phone"}),(0,a.jsx)(F,{children:"Address"}),(0,a.jsx)(F,{children:"Customer VPAs"}),(0,a.jsx)(F,{children:"Actions"})]})}),(0,a.jsx)(M,{children:t.map(e=>(0,a.jsxs)(_,{children:[(0,a.jsx)(R,{className:"font-medium",children:e.name}),(0,a.jsx)(R,{children:e.phone}),(0,a.jsx)(R,{children:e.address}),(0,a.jsx)(R,{children:(0,a.jsx)("div",{className:"space-y-1",children:e.customerVPAs.map(e=>(0,a.jsxs)("div",{className:"flex items-center gap-2",children:[(0,a.jsx)("code",{className:"text-sm bg-muted px-2 py-1 rounded",children:e.vpa}),e.isDefault&&(0,a.jsx)(B,{variant:"default",className:"text-xs",children:"Default"}),e.isDisabled&&(0,a.jsx)(B,{variant:"secondary",className:"text-xs",children:"Disabled"})]},e.id))})}),(0,a.jsx)(R,{children:(0,a.jsxs)("div",{className:"flex items-center gap-2",children:[(0,a.jsx)(P,{variant:"outline",size:"sm",onClick:()=>C(e),children:(0,a.jsx)(eu.Z,{className:"h-4 w-4"})}),(0,a.jsx)(P,{variant:"outline",size:"sm",onClick:()=>v(e.id),children:(0,a.jsx)(em.Z,{className:"h-4 w-4"})}),(0,a.jsx)(P,{variant:"outline",size:"sm",onClick:()=>z(e.id),children:(0,a.jsx)(ex.Z,{className:"h-4 w-4"})})]})})]},e.id))})]})})]}),(0,a.jsx)(es,{open:!!g,onOpenChange:()=>f(null),children:(0,a.jsxs)(ei,{children:[(0,a.jsxs)(el,{children:[(0,a.jsx)(ed,{children:"Edit Booth Person"}),(0,a.jsx)(ec,{children:"Update person information"})]}),(0,a.jsxs)("div",{className:"grid gap-4 py-4",children:[(0,a.jsxs)("div",{className:"grid gap-2",children:[(0,a.jsx)(Q,{htmlFor:"edit-name",children:"Name *"}),(0,a.jsx)(E,{id:"edit-name",value:w.name,onChange:e=>y({...w,name:e.target.value})})]}),(0,a.jsxs)("div",{className:"grid gap-2",children:[(0,a.jsx)(Q,{htmlFor:"edit-phone",children:"Phone *"}),(0,a.jsx)(E,{id:"edit-phone",value:w.phone,onChange:e=>y({...w,phone:e.target.value})})]}),(0,a.jsxs)("div",{className:"grid gap-2",children:[(0,a.jsx)(Q,{htmlFor:"edit-address",children:"Address"}),(0,a.jsx)($,{id:"edit-address",value:w.address,onChange:e=>y({...w,address:e.target.value})})]}),(0,a.jsxs)("div",{className:"grid gap-2",children:[(0,a.jsx)(Q,{htmlFor:"edit-customerVPA",children:"Customer VPA (UPI) *"}),(0,a.jsx)(E,{id:"edit-customerVPA",value:w.customerVPA,onChange:e=>y({...w,customerVPA:e.target.value})})]})]}),(0,a.jsxs)(eo,{children:[(0,a.jsx)(P,{variant:"outline",onClick:()=>f(null),children:"Cancel"}),(0,a.jsx)(P,{onClick:()=>{if(!g||!w.name||!w.phone||!w.customerVPA){A({title:"Error",description:"Please fill in all required fields",variant:"destructive"});return}e(u({...g,name:w.name,phone:w.phone,address:w.address,customerVPAs:g.customerVPAs.map(e=>e.isDefault?{...e,vpa:w.customerVPA}:e)})),f(null),y({name:"",phone:"",address:"",customerVPA:""}),A({title:"Success",description:"Booth person updated successfully"})},children:"Update Person"})]})]})}),(0,a.jsx)(es,{open:!!j,onOpenChange:()=>v(null),children:(0,a.jsxs)(ei,{children:[(0,a.jsxs)(el,{children:[(0,a.jsx)(ed,{children:"Add New VPA"}),(0,a.jsx)(ec,{children:"Add a new VPA for this person. The new VPA will become the default and old ones will be disabled."})]}),(0,a.jsx)("div",{className:"grid gap-4 py-4",children:(0,a.jsxs)("div",{className:"grid gap-2",children:[(0,a.jsx)(Q,{htmlFor:"new-vpa",children:"New Customer VPA (UPI)"}),(0,a.jsx)(E,{id:"new-vpa",value:b,onChange:e=>N(e.target.value),placeholder:"Enter new UPI ID"})]})}),(0,a.jsxs)(eo,{children:[(0,a.jsx)(P,{variant:"outline",onClick:()=>v(null),children:"Cancel"}),(0,a.jsx)(P,{onClick:()=>{if(!j||!b){A({title:"Error",description:"Please enter a valid VPA",variant:"destructive"});return}e(x({personId:j,vpa:b})),v(null),N(""),A({title:"Success",description:"New VPA added and set as default"})},children:"Add VPA"})]})]})})]})}function eg(){let[e,t]=(0,n.useState)("dashboard"),[s,r]=(0,n.useState)(!1);return((0,n.useEffect)(()=>{r(!0)},[]),s)?(0,a.jsxs)("div",{className:"min-h-screen bg-background",children:[(0,a.jsx)(C,{currentPage:e,onPageChange:t}),(0,a.jsxs)("main",{className:"container mx-auto px-4 py-8",children:["dashboard"===e&&(0,a.jsx)(H,{}),"booth-people"===e&&(0,a.jsx)(ep,{})]})]}):(0,a.jsx)("div",{className:"min-h-screen bg-background flex items-center justify-center",children:(0,a.jsxs)("div",{className:"text-center",children:[(0,a.jsx)("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-primary mx-auto mb-4"}),(0,a.jsx)("p",{className:"text-muted-foreground",children:"Loading..."})]})})}function ef(){return(0,a.jsx)(r.zt,{store:v,children:(0,a.jsx)(eg,{})})}},5153:function(e,t,s){"use strict";s.d(t,{pm:function(){return u}});var a=s(2265);let n=0,r=new Map,i=e=>{if(r.has(e))return;let t=setTimeout(()=>{r.delete(e),c({type:"REMOVE_TOAST",toastId:e})},1e6);r.set(e,t)},l=(e,t)=>{switch(t.type){case"ADD_TOAST":return{...e,toasts:[t.toast,...e.toasts].slice(0,1)};case"UPDATE_TOAST":return{...e,toasts:e.toasts.map(e=>e.id===t.toast.id?{...e,...t.toast}:e)};case"DISMISS_TOAST":{let{toastId:s}=t;return s?i(s):e.toasts.forEach(e=>{i(e.id)}),{...e,toasts:e.toasts.map(e=>e.id===s||void 0===s?{...e,open:!1}:e)}}case"REMOVE_TOAST":if(void 0===t.toastId)return{...e,toasts:[]};return{...e,toasts:e.toasts.filter(e=>e.id!==t.toastId)}}},o=[],d={toasts:[]};function c(e){d=l(d,e),o.forEach(e=>{e(d)})}function h(e){let{...t}=e,s=(n=(n+1)%Number.MAX_SAFE_INTEGER).toString(),a=()=>c({type:"DISMISS_TOAST",toastId:s});return c({type:"ADD_TOAST",toast:{...t,id:s,open:!0,onOpenChange:e=>{e||a()}}}),{id:s,dismiss:a,update:e=>c({type:"UPDATE_TOAST",toast:{...e,id:s}})}}function u(){let[e,t]=a.useState(d);return a.useEffect(()=>(o.push(t),()=>{let e=o.indexOf(t);e>-1&&o.splice(e,1)}),[e]),{...e,toast:h,dismiss:e=>c({type:"DISMISS_TOAST",toastId:e})}}},4508:function(e,t,s){"use strict";s.d(t,{cn:function(){return r}});var a=s(1994),n=s(3335);function r(){for(var e=arguments.length,t=Array(e),s=0;s<e;s++)t[s]=arguments[s];return(0,n.m6)((0,a.W)(t))}}},function(e){e.O(0,[898,827,971,117,744],function(){return e(e.s=6888)}),_N_E=e.O()}]);